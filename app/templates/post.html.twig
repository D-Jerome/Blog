

{% extends './layouts/connection.html.twig' %}

{% block content %}             
            <div class="col">            
                <div class="card mb-3 bg-secondary bg-gradient text-light">
                    <div class="card-body">
                        <h3 class="car-title text-warning">{{ post.name }}</h3>
                        <h4><p class="badge bg-primary text-light">Par {{ post.username }} le {{ post.createdAt }}</p></h4>
                        <p class="card-text">{{ post.content | raw  }} </p>
                    </div>
                </div>
            </div>
            {% if comments %}
            <h2> Commentaires </h2>
            {% endif %}
            {% for comment in comments %}
                {% if comment.publishState == true %}
                    <div class="col">            
                        <div class="card mb-3 bg-white bg-gradient ">
                            <div class="card-body">
                                <p class="car-title badge bg-primary text-light">par {{ comment.username }} le {{ comment.createdAt }}</p>
                                <p class="card-text">{{ comment.content | raw }} </p>
                            </div>
                        </div>
                    </div>
                {% else %}
                    {% if authUser.roleName == 'admin' %}
                    <div class="col bg-danger">            
                        <div class="card mb-3 bg-white bg-gradient ">
                            <div class="card-body">
                                <p class="car-title badge bg-primary text-light">par {{ comment.username }} le {{ comment.createdAt }}</p>
                                <p class="card-text">{{ comment.content | raw }} </p>
                            </div>
                        </div>
                    </div>
                    
                    {% endif %}
                {% endif %}    

            {% endfor %}
            <a href="/blog-project/admin/comment/add/{{ post.slug }}/{{ post.id }}" class="btn btn-primary mb-4 {% if authUser.id == false %} disabled {% endif %}">Ajouter un commentaire</a>
            <div class="container col-4 bg-danger-subtle {% if authUser.id != false %} invisible {% endif %} rounded border border-dark">
                <a href="/blog-project/signup" class="btn btn-warning  btn-outline-primary mx-auto p-2 mt-3 w-100" >Inscrivez-vous</a>      
                <div class="col-1 mx-auto p-2">ou</div>
                <a href="/blog-project/login" class="btn btn-warning btn-outline-primary mx-auto p-2 mb-3 w-100">Identifiez-vous</a>
            </div>
{% endblock %}